---
title: "ClyptQ Trading Engine"
description: "Production-grade quantitative trading engine powering the Trading Commerce ecosystem"
---

## Ecosystem Vision

ClyptQ is a **Trading Commerce platform** — a marketplace where quantitative strategies are independently verified, cross-exchange validated, and deployed with trust between Builders and Traders.

**Core Principles**:
- **Code Parity**: The same `StatefulGraph` runs identically in backtest, paper, and live
- **Structural Safety**: [RollingBuffers](/engine/lookback-buffers) make lookahead bias architecturally impossible
- **Independent Verification**: The platform computes all metrics — builders cannot self-report
- **Python Freedom**: Any library (PyTorch, XGBoost, HuggingFace) works inside operators

## Trading Commerce Ecosystem

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#1e293b', 'primaryTextColor': '#e2e8f0', 'primaryBorderColor': '#94F1E8', 'lineColor': '#5bb8b0', 'clusterBkg': '#0f172a', 'clusterBorder': '#1e3a3a', 'titleColor': '#94F1E8', 'edgeLabelBackground': 'transparent' }}}%%
flowchart LR
    classDef highlight fill:#134e4a,stroke:#94F1E8,stroke-width:2.5px,color:#94F1E8
    classDef success fill:#0f2d2b,stroke:#2dd4bf,stroke-width:1.5px,color:#ccfbf1
    Builder["Builder<br><br>Develop in Jupyter<br>Backtest → Paper → Live<br>Submit to Marketplace"]
    Platform["ClyptQ Platform<br><br>Reproduce backtest<br>Cross-exchange validation<br>Compute all metrics"]
    Trader["Trader<br><br>Evaluate verified metrics<br>Paper trade<br>Deploy live"]
    Revenue["Revenue<br><br>Flows back<br>to Builder"]

    Builder --> Platform --> Trader --> Revenue
    class Platform highlight
    class Revenue success
```

<CardGroup cols={3}>
  <Card title="For Builders" icon="wrench" href="/platform/builder-guide">
    - Production infrastructure (data + execution + monitoring)
    - Same code from research to live trading
    - Revenue via marketplace (one-time strategy sales)
  </Card>

  <Card title="Marketplace" icon="store" href="/platform/marketplace">
    - Independent backtest verification
    - Cross-exchange validation on unseen data
    - Platform-computed metrics builders can't manipulate
  </Card>

  <Card title="For Traders" icon="chart-line" href="/platform/trader-guide">
    - Evaluate verified strategies at a glance
    - One-click deploy: paper → live
    - Built-in safety (emergency shutdown, balance sync)
  </Card>
</CardGroup>

## Architecture Overview

ClyptQ consists of **4 layers**:

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#1e293b', 'primaryTextColor': '#e2e8f0', 'primaryBorderColor': '#94F1E8', 'lineColor': '#5bb8b0', 'clusterBkg': '#0f172a', 'clusterBorder': '#1e3a3a', 'titleColor': '#94F1E8', 'edgeLabelBackground': 'transparent' }}}%%
flowchart LR
    classDef highlight fill:#134e4a,stroke:#94F1E8,stroke-width:2.5px,color:#94F1E8
    classDef source fill:#0d3b3b,stroke:#94F1E8,stroke-width:1.5px,color:#e0faf7
    classDef action fill:#172554,stroke:#60a5fa,stroke-width:1.5px,color:#bfdbfe
    subgraph L1["TradingSpec"]
        direction TB
        DS["DataSpec"]
        SS["StrategySpec"]
        ES["ExecutionSpec"]
    end
    subgraph L2["TradingDriver"]
        Driver["Warmup → Clock Sync<br>→ Tick Loop → Shutdown"]
    end
    subgraph L3["StatefulGraph"]
        Graph["FIELD → Operators<br>→ STATE → Intentions"]
    end
    subgraph L4["Executor"]
        Exec["BacktestFactory<br>LiveFactory (CCXT)"]
    end

    L1 --> L2 --> L3 --> L4
    class Driver highlight
    class Graph source
    class Exec action
```

<AccordionGroup>
  <Accordion title="1. System Layer — Core Execution Engine">
    - **[Operator Protocol](/engine/operator-protocol)**: Standard `compute()` interface for all operations
    - **[TaggedArray](/engine/tagged-array)**: 4-field data structure (value, exists, valid, updated)
    - **[StatefulGraph](/engine/stateful-graph)**: DAG-based automatic execution with topological ordering
    - **[RollingBuffer](/engine/lookback-buffers)**: Per-consumer circular buffers preventing lookahead
    - **TradingDriver**: Warmup → tick loop → shutdown orchestration
  </Accordion>

  <Accordion title="2. Operator Layer — Strategy Components">
    - **[Indicators](/operators/overview)**: SMA, EMA, RSI, MACD, Bollinger, ATR, and more
    - **[Signals](/operators/signals/alphas)**: Alpha generators, factor models, Alpha-101
    - **[Transforms](/operators/transforms/scalers)**: ZScore, Rank, MVO, RiskParity, EqualWeight
    - **[Universe](/operators/universe/filters)**: Volume/volatility filters and liquidity scores
    - **[Semantic](/operators/semantic)**: LLM scoring, web search — paper/live only (ephemeral)
  </Accordion>

  <Accordion title="3. Trading Layer — Execution & State Management">
    - **[TradingSpec](/engine/trading-spec)**: Unified configuration hierarchy
    - **[Execution Pipeline](/engine/execution-pipeline)**: Intention → Delta → Order → Fill
    - **[FIELD/STATE](/engine/field-state)**: Market data (FIELD) and portfolio state (STATE) separation
    - **[Cost Models](/backtesting/cost-models)**: Exchange-specific fees, slippage, funding rates
  </Accordion>

  <Accordion title="4. Data Layer — Multi-Source Integration">
    - **Crypto**: Binance, Bybit, Gate.io, Coinbase, Kraken, OKX, and more
    - **Storage**: Parquet files with automatic caching
    - **Live**: WebSocket feeds with automatic reconnection
  </Accordion>
</AccordionGroup>

## Key Concepts

### StatefulGraph

Strategies are DAGs (Directed Acyclic Graphs) of operators. The graph is stateless — operators receive only their declared lookback window:

```python
from clyptq.system.graph import StatefulGraph, Input
from clyptq.apps.trading.operators.indicator import SMA
from clyptq.apps.trading.operators.signal import CrossoverAlpha

graph = StatefulGraph()

close = Input("FIELD:binance:futures:ohlcv:close", "1m", lookback=50)
graph.add_node("sma_fast", SMA(span=10), inputs=[close])
graph.add_node("sma_slow", SMA(span=50), inputs=[close])

graph.add_node("signal", CrossoverAlpha(),
    inputs=[
        Input("sma_fast", "1m", lookback=2),
        Input("sma_slow", "1m", lookback=2),
    ])
```

### TaggedArray (4-Field System)

All data flows through TaggedArray — a structured container that distinguishes missing data from invalid data:

```python
TaggedArray:
    value: np.ndarray    # Actual values (shape: lookback × n_symbols)
    exists: np.ndarray   # Does data exist for this symbol?
    valid: np.ndarray    # Is the value valid (not NaN)?
    updated: np.ndarray  # Was it updated at this timestamp?
```

### FIELD and STATE

Two data namespaces power every strategy:
- **FIELD** — Market data from exchanges: `FIELD:binance:futures:ohlcv:close`
- **STATE** — Portfolio state from the executor: `STATE:binance:futures:cash`

See [FIELD Data Principle](/engine/field-state) and [STATE Principle](/engine/field-state).

### Code Parity

The same graph runs identically across all modes. Only the top-level `mode` on `TradingSpec` changes:

```python
# Backtest (notebook)
TradingSpec(..., mode="backtest")

# Paper (platform-managed after submit)
TradingSpec(..., mode="paper")

# Live (platform-managed after submit)
TradingSpec(..., mode="live")
```

See [Code Parity](/competitive/code-parity) for the full comparison.

See [Why ClyptQ](/competitive/overview) for a detailed comparison with other platforms.

## Next Steps

<CardGroup cols={2}>
  <Card title="Quickstart" icon="rocket" href="/quickstart">
    Build and backtest your first strategy in 5 minutes
  </Card>

  <Card title="Builder Guide" icon="wrench" href="/platform/builder-guide">
    Full strategy development and marketplace listing workflow
  </Card>

  <Card title="Trader Guide" icon="chart-line" href="/platform/trader-guide">
    How to evaluate, deploy, and manage strategies
  </Card>

  <Card title="Engine Concepts" icon="gears" href="/engine/field-state">
    Deep dive into FIELD, STATE, TaggedArray, and StatefulGraph
  </Card>
</CardGroup>
